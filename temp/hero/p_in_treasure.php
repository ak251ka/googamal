<div class="h_t_t">
<?php    require_once('.//lib/dbo.php');  require_once('.//lib/form.php');  require_once('.//lib/object.php');  require_once('.//eng/main/troop.php');  $row = $dbo->ExectueRow(sprintf('SELECT * FROM `%shero_tm` WHERE `pid` = \'%s\' AND (`modify` IS NOT NULL) and (`modify` > \'%d\')',   DB_PERFIX,$account->id,(ONE_TICK * 4)+ $_SERVER['REQUEST_TIME']));  if(empty($row))  {   printf('<center>%s</center>',$lang['NoRecord']);   return;  }  $elixir = array();  $sql = $dbo->ExectueQuery(sprintf('SELECT `id`,`name` FROM `%selixir_i`',DB_PERFIX));  while($r = $dbo->Read($sql))   $elixir[$r['id']] = $r['name'];  $dbo->Cancel($sql);  gc_collect_cycles();  printf('<table><tr><td>%14$s</td><td><img src="img/troop/s/%1$s_1.gif" alt="%2$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_2.gif" alt="%3$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_3.gif" alt="%4$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_4.gif" alt="%5$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_5.gif" alt="%6$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_6.gif" alt="%7$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_7.gif" alt="%8$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_8.gif" alt="%9$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_9.gif" alt="%10$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_10.gif" alt="%11$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_11.gif" alt="%12$s" class = "i24"/></td><td><img src="img/troop/s/%1$s_12.gif" alt="%13$s" class = "i24"/></td><td colspan="2">%16$s</td><td>%15$s</td></tr>'   ,$account->kind   , $troops[$account->kind][ 1][6]   , $troops[$account->kind][ 2][6]   , $troops[$account->kind][ 3][6]   , $troops[$account->kind][ 4][6]   , $troops[$account->kind][ 5][6]   , $troops[$account->kind][ 6][6]   , $troops[$account->kind][ 7][6]   , $troops[$account->kind][ 8][6]   , $troops[$account->kind][ 9][6]   , $troops[$account->kind][10][6]   , $troops[$account->kind][11][6]   , $troops[$account->kind][12][6]   ,$lang['Level'],$lang['Action'],$lang['Elixir']);  printf('<tr><td>%s</td>', $row['lvl']);  for($i = 1;$i<13; $i++)   printf('<td>%s</td>',$row['t'.$i]);  if(!$row['e'])   echo '<td colspan="2">&nbsp;</td>';  else  {   printf('<td><img src="img/eli/%s.gif" alt="%s" class="i24" /></td>',$row['e'], $elixir[$row['e']]);   printf('<td>%s</td>',$row['en']);  }  printf('<td rowspan="3" style="width:75px;">%s</td></tr>', $form->Addtimer($row['modify']));  $sql2 = $dbo->ExectueQuery(    sprintf('SELECT `t`.`id`,`i`.`name`,`i`.`t1`,`i`.`t2`,`i`.`t3`,`i`.`t4` FROM `%1$shero_tmi` AS `t` LEFT JOIN `%1$shero_i` AS `i` ON (`t`.`hid` = `i`.`id`) WHERE `t`.`tid` = \'%2$s\'',      DB_PERFIX,$row['id']));  $items = array();  $i = 0;  while($r = $dbo->Read($sql2))   $items[$i++] = new Object($r);  $dbo->Cancel($sql2);  printf('<tr><td  colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td>%s</tr><tr><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td colspan = "2" class="box">%s</td><td>%s</td><td>%s</td><td>%s</td><td>%s</td><td>%s</td></tr></table>',      $form->HeroItem($items[0],$power)      , isset($items[1]) ? $form->HeroItem($items[1],$power) : '&nbsp;'      , isset($items[2]) ? $form->HeroItem($items[2],$power) : '&nbsp;'      , isset($items[3]) ? $form->HeroItem($items[3],$power) : '&nbsp;'      , isset($items[4]) ? $form->HeroItem($items[4],$power) : '&nbsp;'      ,'<td><img src = "img/res/r1.gif" id = "r1" class = "i24" /></td><td><img src = "img/res/r2.gif" id = "r2" class = "i24" /></td><td><img src = "img/res/r3.gif" id = "r3" class = "i24" /></td><td><img src = "img/res/r4.gif" id = "r4" class = "i24" /></td><td><img src = "img/res/r5.gif" id = "r5" class = "i24" /></td>'      , isset($items[5]) ? $form->HeroItem($items[5],$power) : '&nbsp;'      , isset($items[6]) ? $form->HeroItem($items[6],$power) : '&nbsp;'      , isset($items[7]) ? $form->HeroItem($items[7],$power) : '&nbsp;'      , isset($items[8]) ? $form->HeroItem($items[8],$power) : '&nbsp;'      , isset($items[9]) ? $form->HeroItem($items[9],$power) : '&nbsp;'      ,$row['r'],$row['r'],$row['r'],$row['r'],$row['r']);  $c = $dbo->ExectueScaler(sprintf('SELECT COUNT(*) AS `c` FROM `%shero_ti` WHERE `itid` = \'%s\'',      DB_PERFIX,$row['id']),'c');  if($c < ($row['lvl'] -1))  {  ?>
</div>
<div class="h_t_t">
<form action="hero.php?show=<?php echo P_INVI_TREASURE;?>" method="post">
<input type="hidden" name = "com" value="<?php echo P_INVI_TREASURE;?>"  />
<input type="hidden" name="kind" value="<?php echo $row['id'];?>" />
<center><?php echo $lang['MInvitation']; ?></center>
<table><tr><td><?php echo $lang['Name'];?></td><td><input type="text" name="subkind" value=""  /></td></tr>
<tr><td colspan="2"><input type="submit" value="<?php echo $lang['Save'];?>"  /></td></tr></table>
</form>
<?php  }  else   printf('<center class = "error"><blink>%s</blink></center>',sprintf($lang['bMaxLevel'],$lang['Map']));     $sql2 = $dbo->ExectueQuery(sprintf('SELECT `a`.`id` , `a`.`name` FROM `%1$saccount` AS `a` WHERE `a`.`id` IN ( SELECT `i`.`pid` FROM `%1$shero_ti` AS `i` WHERE `i`.`itid` = \'%2$s\')',DB_PERFIX, $row['id']));  $i = 1;  echo '<table>';  if($dbo->RowsNumber($sql2))  {   while($r = $dbo->Read($sql2))    printf('<tr><td style="width:50px;">%s</td><td style="width:450px;">%s</td><td style="width:150px;">%s</td></tr>',$i++,$form->PlayerLink($r['id'],$r['name']),$lang['E_U_INVIT']);  }  else   printf('<tr><td>%s</td></tr>',$lang['NoRecord']);  echo '</table></div>';  $dbo->Cancel($sql2);  ?>